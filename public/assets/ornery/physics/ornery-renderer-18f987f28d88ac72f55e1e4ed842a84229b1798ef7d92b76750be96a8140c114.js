var ArenaRenderer=Class.create({initialize:function(e,t){this.canvas=e,this.renderDebugInfo=t,this.context=this.canvas.getContext("2d")},DrawObjects:function(e){this.Clear();for(var t=e.length,n=null,r=0,i=0,o=0,s=0;t>s;s++)if(n=e[s],n instanceof OrneryPoly&&this.DrawPolygon(n),this.renderDebugInfo&&!n.fixed){r+=.5*n.Mass()*Math.pow(n.vel.Mag(),2),i+=.5*n.momentOfInert*Math.pow(n.rotVel,2);var a=496-n.pos.y;o+=a*n.Mass()/.031}this.renderDebugInfo&&(this.context.fillStyle="blue",this.context.font="10px sans-serif",this.context.fillText("Translational Energy: "+r,10,15),this.context.fillText("Rotational Energy: "+i,10,30),this.context.fillText("Gravitational Energy: "+o,10,45),this.context.fillText("Total Energy: "+(r+i+o),10,60))},DrawPolygon:function(e){if(e.vertices.length>2){var t=e.GetWorldVertices();this.context.beginPath();var n=t[0];this.context.moveTo(n.x,n.y),this.renderDebugInfo&&(this.context.fillStyle="black",this.context.font="10px sans-serif",this.context.fillText("("+n.x.toPrecision(4)+","+n.y.toPrecision(4)+")",n.x,n.y));for(var r=t.length,i=1;r>i;i++)n=t[i],this.context.lineTo(n.x,n.y),this.renderDebugInfo&&(this.context.fillStyle="black",this.context.font="10px sans-serif",this.context.fillText("("+n.x.toPrecision(4)+","+n.y.toPrecision(4)+")",n.x,n.y));if(this.context.closePath(),this.context.strokeStyle="black","#FFFFFF"!=e.color&&(this.context.fillStyle=e.color,this.context.fill()),this.context.stroke(),this.renderDebugInfo){this.context.beginPath(),this.context.arc(e.pos.x,e.pos.y,2,0,2*Math.PI,!1),this.context.fillStyle="green",this.context.fill(),this.context.fillText("("+e.pos.x.toPrecision(4)+","+e.pos.y.toPrecision(4)+")",e.pos.x,e.pos.y);for(var o=e.GetSurfaceNormals(),i=1;i<=o.length;i++){this.context.beginPath();var s=(i-1)%o.length,a=i%o.length,u=oVec2.Add(t[a],t[s]);u.Multiply(.5),this.context.moveTo(u.x,u.y);var l=oVec2.Multiply(o[a],10);this.context.lineTo(u.x+l.x,u.y+l.y),this.context.strokeStyle="green",this.context.stroke()}}}},DrawCollisions:function(e){for(var t,n=0;n<e.length;n++){t=e[n],this.context.beginPath(),this.context.moveTo(t.vertex.x,t.vertex.y),this.context.lineTo(t.vertex.x+t.mtv.x,t.vertex.y+t.mtv.y),this.context.strokeStyle="red",this.context.stroke(),this.context.fillStyle="red";var r=oVec2.Add(oVec2.Multiply(t.mtv,.5),t.vertex);this.context.font="10px sans-serif",this.context.fillText("("+t.mtv.x.toPrecision(4)+","+t.mtv.y.toPrecision(4)+")",r.x,r.y),this.context.beginPath(),this.context.arc(t.vertex.x,t.vertex.y,2,0,2*Math.PI,!1),this.context.fillStyle="blue",this.context.fill(),this.context.font="10px sans-serif",this.context.fillText("("+t.vertex.x.toPrecision(4)+","+t.vertex.y.toPrecision(4)+")",t.vertex.x,t.vertex.y)}},DrawVictory:function(e){this.context.fillStyle="green",this.context.font="20px sans-serif",this.context.fillText(e+" Has lost the game",this.canvas.width/2-120,40)},Clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}});