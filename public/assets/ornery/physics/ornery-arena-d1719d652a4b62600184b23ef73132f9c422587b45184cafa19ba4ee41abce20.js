var OrneryArena=Class.create({initialize:function(e,t){this.objects=this.CreateWorldObjects(e.width,e.height),this.objects=this.objects.concat(GetUserTowers(0,130,200,0)),this.objects=this.objects.concat(GetUserTowers(600,30,-200,0)),this.renderer=new ArenaRenderer(e,t),this.physics=new OrneryPhysics(e.width,e.height)},Step:function(e){this.physics.Step(this.objects,e),this.Draw(),setTimeout(this.ContinueExecution,3)},ContinueExecution:function(){},Draw:function(){this.renderer.DrawObjects(this.objects),this.renderer.renderDebugInfo&&this.renderer.DrawCollisions(this.physics.currentCollisions);var e=CheckVictoryCondition(this.objects);null!=e&&this.renderer.DrawVictory(e)},GetObjectById:function(e){var t,n=null,r=this.objects.length;for(t=0;r>t;t++)if(this.objects[t].id==e){n=this.objects[t];break}return n},GetActiveObject:function(e){var t,n=null,r=this.objects.length;for(t=0;r>t;t++){var i=this.objects[t];if(i.user==e&&1==i.active){n=i;break}}return n},GetObjectAtPoint:function(e){return this.physics.colDet.ObjectAtPoint(e,this.objects)},AddObject:function(e){this.objects.push(e)},Clear:function(){this.objects=[],this.Draw()},CreateWorldObjects:function(e,t){var n=4,r=0+n,i=0+n,o=e-n,a=t-n,s=50,u=new OrneryPoly(new oVec2(0,0),[new oVec2(o,r),new oVec2(o,-s),new oVec2(i,-s),new oVec2(i,r)],!0),c=new OrneryPoly(new oVec2(0,0),[new oVec2(o,a),new oVec2(o+s,a),new oVec2(o+s,r),new oVec2(o,r)],!0),l=new OrneryPoly(new oVec2(0,0),[new oVec2(i,a+s),new oVec2(o,a+s),new oVec2(o,a),new oVec2(i,a)],!0),f=new OrneryPoly(new oVec2(0,0),[new oVec2(-s,r),new oVec2(-s,a),new oVec2(i,a),new oVec2(i,r)],!0);return u.fixed=!0,c.fixed=!0,l.fixed=!0,f.fixed=!0,[u,c,l,f]}});